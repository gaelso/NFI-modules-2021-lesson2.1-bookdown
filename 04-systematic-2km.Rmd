


### The 2 km grid {-}

**Now Prepare `sf_point2`, `sf_plot2`, `nplot2` and `nplot2_total` for creating a 2 km grid.** 

Create directly:

- Points with the option `what = "center"`.

```{r points2-cons, eval=F, class.source="Rchunk-cons"}

## Console
##

```

```{r points2-sol, class.source="Rchunk-sol", class.output="Rout-sol"}

sf_points2 <- st_make_grid(sf_lc, cellsize = c(2000, 2000), what = "centers", offset = offset) %>%
  st_intersection(sf_admin) %>%
  st_as_sf()

```


- Plots by joining the land cover shapefile `sf_lc`.

```{r plot2-cons, eval=F, class.source="Rchunk-cons"}

## Console
##

```

```{r plot2-sol, class.source="Rchunk-sol", class.output="Rout-sol"}

sf_plot2 <- sf_points2 %>%
  st_join(sf_lc) %>%
  mutate(lc = fct_reorder(lc, lc_id)) %>%
  filter(!is.na(lc))

```

\  

- A map with the plots over the land cover (remember we have a custom color palette `pal` for ```r newland_name``` land covers).

```{r ggplot2-cons, eval=F, class.source="Rchunk-cons"}

## Console
##

```

```{r ggplot2-sol, class.source="Rchunk-sol", class.output="Rout-sol"}

ggplot() +
  geom_sf(data = sf_lc, aes(fill = lc), color = NA) +
  geom_sf(data = sf_plot2, aes(fill = lc), shape = 21) +
  scale_fill_manual(values = pal) +
  labs(fill = "", color = "") +
  theme_void()

```

\  

- Calculations of the number of plots per land cover class.

```{r nplot2-cons, eval=F, class.source="Rchunk-cons"}

## Console
##

```

```{r nplot2-sol, class.source="Rchunk-sol", class.output="Rout-sol"}

nplot2 <- sf_plot2 %>%
  as_tibble() %>%
  group_by(lc) %>%
  summarise(n = n())
nplot2 

```


- And the total number of plot in forests.

```{r nplot2tot-cons, eval=F, class.source="Rchunk-cons"}

## Console

```

```{r nplot2tot-sol, class.source="Rchunk-sol", class.output="Rout-sol"}

nplot2_total <- nplot2 %>%
  filter(!(lc %in% c("WA", "NF"))) %>%
  summarise(n = sum(n))
nplot2_total

```

\  

::::::{.question data-latex=""}

**ADD exercise: what grid to select**


::::::


Good job! The 2 km grid is outside our budget constraint so we will continue with the <txt-green>3 km grid</txt-green>.

\  
